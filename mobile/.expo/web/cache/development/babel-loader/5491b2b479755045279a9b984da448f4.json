{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\berna\\\\Downloads\\\\next_level_week\\\\pegapets_omnistack_projetopessoal\\\\mobile\\\\src\\\\pages\\\\Places\\\\index.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport Constants from 'expo-constants';\nimport { Feather as Icon } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport MapView, { Marker } from 'react-native-maps';\nimport { SvgUri } from 'react-native-svg';\nimport * as Location from 'expo-location';\nimport api from \"../../services/api\";\n\nvar Places = function Places() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      pets = _useState2[0],\n      setPets = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedPets = _useState4[0],\n      setSelectedPets = _useState4[1];\n\n  var _useState5 = useState([0, 0]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      initialPosition = _useState6[0],\n      setInitialPosition = _useState6[1];\n\n  var navigation = useNavigation();\n  useEffect(function () {\n    function loadPosition() {\n      var _await$Location$reque, status, location, _location$coords, latitude, longitude;\n\n      return _regeneratorRuntime.async(function loadPosition$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n            case 2:\n              _await$Location$reque = _context.sent;\n              status = _await$Location$reque.status;\n\n              if (!(status !== 'granted')) {\n                _context.next = 7;\n                break;\n              }\n\n              Alert.alert('Ooops...', 'Precisamos de sua permissão para obter a localização');\n              return _context.abrupt(\"return\");\n\n            case 7:\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync());\n\n            case 9:\n              location = _context.sent;\n              _location$coords = location.coords, latitude = _location$coords.latitude, longitude = _location$coords.longitude;\n              console.log(latitude, longitude);\n              setInitialPosition([latitude, longitude]);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    loadPosition();\n  }, []);\n  useEffect(function () {\n    api.get('pets').then(function (response) {\n      setPets(response.data);\n    });\n  }, []);\n\n  function handleNavigateBack() {\n    navigation.goBack();\n  }\n\n  function handleNavigateToDetail() {\n    navigation.navigate('Detail');\n  }\n\n  function handleSelectedPet(id) {\n    var alreadySelected = selectedPets.findIndex(function (pet) {\n      return pet === id;\n    });\n\n    if (alreadySelected >= 0) {\n      var filteredPets = selectedPets.filter(function (pet) {\n        return pet !== id;\n      });\n      setSelectedPets(filteredPets);\n    } else {\n      setSelectedPets([].concat(_toConsumableArray(selectedPets), [id]));\n    }\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: handleNavigateBack,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, React.createElement(Icon, {\n    name: \"arrow-left\",\n    size: 24,\n    color: \"#3F3B51\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  })), React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, \"Bem vindo!\"), React.createElement(Text, {\n    style: styles.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, \"Encontre no mapa um local de ado\\xE7\\xE3o.\"), React.createElement(View, {\n    style: styles.mapContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, initialPosition[0] !== 0 && React.createElement(MapView, {\n    style: styles.map,\n    initialRegion: {\n      latitude: initialPosition[0],\n      longitude: initialPosition[1],\n      latitudeDelta: 0.014,\n      longitudeDelta: 0.014\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, React.createElement(Marker, {\n    style: styles.mapMarker,\n    onPress: handleNavigateToDetail,\n    coordinate: {\n      latitude: -27.2092052,\n      longitude: -49.6401092\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, React.createElement(View, {\n    style: styles.mapMarkerContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 33\n    }\n  }, React.createElement(Image, {\n    style: styles.mapMarkerImage,\n    source: {\n      uri: 'https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1327&q=80'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 37\n    }\n  }), React.createElement(Text, {\n    style: styles.mapMarkerTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 37\n    }\n  }, \"Pet Anjos\")))))), React.createElement(View, {\n    style: styles.itemsContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.itemsContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, pets.map(function (pet) {\n    return React.createElement(TouchableOpacity, {\n      key: String(pet.id),\n      style: [styles.item, selectedPets.includes(pet.id) ? styles.selectedItem : {}],\n      onPress: function onPress() {\n        return handleSelectedPet(pet.id);\n      },\n      activeOpacity: 0.7,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    }, React.createElement(SvgUri, {\n      width: 50,\n      height: 50,\n      uri: pet.image_url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 29\n      }\n    }), React.createElement(Text, {\n      style: styles.itemTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 29\n      }\n    }, pet.title));\n  }))));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 32,\n    paddingTop: 20 + Constants.statusBarHeight\n  },\n  title: {\n    fontSize: 20,\n    fontFamily: 'Ubuntu_700Bold',\n    marginTop: 24\n  },\n  description: {\n    color: '#6C6C80',\n    fontSize: 16,\n    marginTop: 4,\n    fontFamily: 'Roboto_400Regular'\n  },\n  mapContainer: {\n    flex: 1,\n    width: '100%',\n    borderRadius: 10,\n    overflow: 'hidden',\n    marginTop: 16\n  },\n  map: {\n    width: '100%',\n    height: '100%'\n  },\n  mapMarker: {\n    width: 90,\n    height: 80\n  },\n  mapMarkerContainer: {\n    width: 90,\n    height: 70,\n    backgroundColor: '#6A4671',\n    flexDirection: 'column',\n    borderRadius: 8,\n    overflow: 'hidden',\n    alignItems: 'center'\n  },\n  mapMarkerImage: {\n    width: 90,\n    height: 45,\n    resizeMode: 'cover'\n  },\n  mapMarkerTitle: {\n    flex: 1,\n    fontFamily: 'Roboto_400Regular',\n    color: '#FFF',\n    fontSize: 13,\n    lineHeight: 23\n  },\n  itemsContainer: {\n    flexDirection: 'row',\n    marginTop: 16,\n    marginBottom: 16,\n    marginLeft: 'auto',\n    marginRight: 'auto'\n  },\n  item: {\n    backgroundColor: '#fff',\n    borderWidth: 2,\n    borderColor: '#eee',\n    height: 100,\n    width: 100,\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    paddingTop: 20,\n    paddingBottom: 16,\n    marginRight: 8,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    textAlign: 'center'\n  },\n  selectedItem: {\n    borderColor: '#6A4671',\n    borderWidth: 2\n  },\n  itemTitle: {\n    fontFamily: 'Roboto_400Regular',\n    textAlign: 'center',\n    fontSize: 13\n  }\n});\nexport default Places;","map":{"version":3,"sources":["C:/Users/berna/Downloads/next_level_week/pegapets_omnistack_projetopessoal/mobile/src/pages/Places/index.tsx"],"names":["React","useState","useEffect","Constants","Feather","Icon","useNavigation","MapView","Marker","SvgUri","Location","api","Places","pets","setPets","selectedPets","setSelectedPets","initialPosition","setInitialPosition","navigation","loadPosition","requestPermissionsAsync","status","Alert","alert","getCurrentPositionAsync","location","coords","latitude","longitude","console","log","get","then","response","data","handleNavigateBack","goBack","handleNavigateToDetail","navigate","handleSelectedPet","id","alreadySelected","findIndex","pet","filteredPets","filter","styles","container","title","description","mapContainer","map","latitudeDelta","longitudeDelta","mapMarker","mapMarkerContainer","mapMarkerImage","uri","mapMarkerTitle","itemsContainer","String","item","includes","selectedItem","image_url","itemTitle","StyleSheet","create","flex","paddingHorizontal","paddingTop","statusBarHeight","fontSize","fontFamily","marginTop","color","width","borderRadius","overflow","height","backgroundColor","flexDirection","alignItems","resizeMode","lineHeight","marginBottom","marginLeft","marginRight","borderWidth","borderColor","paddingBottom","justifyContent","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Constants from 'expo-constants';\r\nimport { Feather as Icon } from '@expo/vector-icons';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { View, Text, StyleSheet, TouchableOpacity, Alert, Image } from 'react-native';\r\nimport MapView, { Marker } from 'react-native-maps';\r\nimport { SvgUri } from 'react-native-svg';\r\nimport * as Location from 'expo-location';\r\nimport api from '../../services/api';\r\n\r\ninterface Pet {\r\n    id: number;\r\n    title: string;\r\n    image_url: string;\r\n}\r\n\r\nconst Places = () => {\r\n    const [pets, setPets] = useState<Pet[]>([]);\r\n    const [selectedPets, setSelectedPets] = useState<number[]>([]);\r\n\r\n    const [initialPosition, setInitialPosition] = useState<[number, number]>([0, 0]);\r\n\r\n    const navigation = useNavigation();\r\n\r\n    useEffect(() => {\r\n        async function loadPosition() {\r\n            const { status } = await Location.requestPermissionsAsync();\r\n\r\n            if (status !== 'granted') {\r\n                Alert.alert('Ooops...', 'Precisamos de sua permissão para obter a localização');\r\n                return;\r\n            }\r\n\r\n            const location = await Location.getCurrentPositionAsync();\r\n\r\n            const { latitude, longitude } = location.coords;\r\n\r\n            console.log(latitude, longitude);\r\n\r\n            setInitialPosition([\r\n                latitude,\r\n                longitude\r\n            ]);\r\n        }\r\n        loadPosition();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        api.get('pets').then(response => {\r\n            setPets(response.data);\r\n        });\r\n    }, []);\r\n\r\n    function handleNavigateBack() {\r\n        navigation.goBack();\r\n    }\r\n\r\n    function handleNavigateToDetail() {\r\n        navigation.navigate('Detail');\r\n    }\r\n\r\n    function handleSelectedPet(id: number) {\r\n        const alreadySelected = selectedPets.findIndex(pet => pet === id);\r\n\r\n        if (alreadySelected >= 0) {\r\n            const filteredPets = selectedPets.filter(pet => pet !== id);\r\n            setSelectedPets(filteredPets);\r\n        } else {\r\n            setSelectedPets([...selectedPets, id]);\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <View style={styles.container}>\r\n                <TouchableOpacity onPress={handleNavigateBack}>\r\n                    <Icon name=\"arrow-left\" size={24} color=\"#3F3B51\" />\r\n                </TouchableOpacity>\r\n\r\n                <Text style={styles.title}>Bem vindo!</Text>\r\n                <Text style={styles.description}>Encontre no mapa um local de adoção.</Text>\r\n\r\n                <View style={styles.mapContainer}>\r\n                    {initialPosition[0] !== 0 && (\r\n                        <MapView\r\n                            style={styles.map}\r\n\r\n                            initialRegion={{\r\n                                latitude: initialPosition[0],\r\n                                longitude: initialPosition[1],\r\n                                latitudeDelta: 0.014,\r\n                                longitudeDelta: 0.014,\r\n                            }}\r\n                        >\r\n                            <Marker\r\n                                style={styles.mapMarker}\r\n                                onPress={handleNavigateToDetail}\r\n                                coordinate={{\r\n                                    latitude: -27.2092052,\r\n                                    longitude: -49.6401092\r\n                                }}\r\n                            >\r\n                                <View style={styles.mapMarkerContainer}>\r\n                                    <Image style={styles.mapMarkerImage} source={{ uri: 'https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1327&q=80' }} />\r\n                                    <Text style={styles.mapMarkerTitle}>Pet Anjos</Text>\r\n                                </View>\r\n                            </Marker>\r\n                        </MapView>\r\n                    )}\r\n                </View>\r\n            </View>\r\n            <View style={styles.itemsContainer}>\r\n                <View style={styles.itemsContainer}>\r\n                    {pets.map(pet => (\r\n                        <TouchableOpacity\r\n                            key={String(pet.id)}\r\n                            style={[\r\n                                styles.item,\r\n                                selectedPets.includes(pet.id) ? styles.selectedItem : {}\r\n                            ]}\r\n                            onPress={() => handleSelectedPet(pet.id)}\r\n                            activeOpacity={0.7}\r\n                        >\r\n                            <SvgUri width={50} height={50} uri={pet.image_url} />\r\n                            <Text style={styles.itemTitle}>{pet.title}</Text>\r\n                        </TouchableOpacity>\r\n                    ))}\r\n                </View>\r\n            </View>\r\n        </>\r\n    )\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        paddingHorizontal: 32,\r\n        paddingTop: 20 + Constants.statusBarHeight,\r\n    },\r\n\r\n    title: {\r\n        fontSize: 20,\r\n        fontFamily: 'Ubuntu_700Bold',\r\n        marginTop: 24,\r\n    },\r\n\r\n    description: {\r\n        color: '#6C6C80',\r\n        fontSize: 16,\r\n        marginTop: 4,\r\n        fontFamily: 'Roboto_400Regular',\r\n    },\r\n\r\n    mapContainer: {\r\n        flex: 1,\r\n        width: '100%',\r\n        borderRadius: 10,\r\n        overflow: 'hidden',\r\n        marginTop: 16,\r\n    },\r\n\r\n    map: {\r\n        width: '100%',\r\n        height: '100%',\r\n    },\r\n\r\n    mapMarker: {\r\n        width: 90,\r\n        height: 80,\r\n    },\r\n\r\n    mapMarkerContainer: {\r\n        width: 90,\r\n        height: 70,\r\n        backgroundColor: '#6A4671',\r\n        flexDirection: 'column',\r\n        borderRadius: 8,\r\n        overflow: 'hidden',\r\n        alignItems: 'center'\r\n    },\r\n\r\n    mapMarkerImage: {\r\n        width: 90,\r\n        height: 45,\r\n        resizeMode: 'cover',\r\n    },\r\n\r\n    mapMarkerTitle: {\r\n        flex: 1,\r\n        fontFamily: 'Roboto_400Regular',\r\n        color: '#FFF',\r\n        fontSize: 13,\r\n        lineHeight: 23,\r\n    },\r\n\r\n    itemsContainer: {\r\n        flexDirection: 'row',\r\n        marginTop: 16,\r\n        marginBottom: 16,\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto'\r\n    },\r\n\r\n    item: {\r\n        backgroundColor: '#fff',\r\n        borderWidth: 2,\r\n        borderColor: '#eee',\r\n        height: 100,\r\n        width: 100,\r\n        borderRadius: 8,\r\n        paddingHorizontal: 16,\r\n        paddingTop: 20,\r\n        paddingBottom: 16,\r\n        marginRight: 8,\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n\r\n        textAlign: 'center',\r\n    },\r\n\r\n    selectedItem: {\r\n        borderColor: '#6A4671',\r\n        borderWidth: 2,\r\n    },\r\n\r\n    itemTitle: {\r\n        fontFamily: 'Roboto_400Regular',\r\n        textAlign: 'center',\r\n        fontSize: 13,\r\n    },\r\n});\r\n\r\nexport default Places;"]},"metadata":{},"sourceType":"module"}